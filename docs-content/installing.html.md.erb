---
title: Installing and Configuring the MongoDB Enterprise Service for PCF 
owner: Partners
---

This topic describes how to install and configure the MongoDB Enterprise Service for Pivotal Cloud Foundry (PCF) tile.

##<a id='install'></a> Install and Configure the MongoDB Enterprise Service for PCF Tile

1. Download the product file from [Pivotal Network](http://network.pivotal.io).

1. Navigate to the Ops Manager Installation Dashboard and click **Import a Product** to upload the product file. 

1. Click **Add** next to the uploaded MongoDB Enterprise Service for PCF tile in the Ops Manager **Available Products** view to add it to your staging area.

1. Click the newly added **MongoDB Enterprise Service for PCF** tile.

1. Click **MongoDB On-Demand**.
	![Ops Man Config](images/config-v1.0.2.png)

1. For **MongoDB Ops Manager URL**, enter the URL of your MongoDB Ops Manager web interface.

1. For **MongoDB Ops Manager username**, enter the MongoDB Ops Manager username that PCF will use to create MongoDB instances. The user must have sufficient permissions to create a cluster.

1. For **MongoDB Ops Manager API key**, enter the key associated with your MongoDB account.

1. (Optional) Enable backups through MongoDB Ops Manager by selecting the **Backups enabled by default** checkbox.

1. Add one or more **Tags** to automatically apply to each cluster deployed through PCF. These tag are accessable in MongoDB Ops Manager. They can be used to help distunguish PCF-based deployments from  other deployments in MongoDB Ops Manager.

1. For **MongoDB availability zone(s)**, select the checkboxes that correspond to the availability zones where you want to deploy MongoDB. The availability zones must have an associated service network.

1. Click **Save**.  

1. For each of the **Service Plan** sections, configure the **Small**, **Medium**, and **Large** **VM Type**s and **disk type**s.
	![Service Plans Config](images/service-plans-rs-v1.0.2.png)

1. Click **Save** for each.

1. (Optional) Configure the **Security** settings.
You can configure TSL/SSL settings for your MongoDB deployments.
By default, all deployments have MongoDB authetication enabled. These settings are only required to support TSL/SSL communication between 
applications and MongoDB databases. 
  * Enter a server certificate and private key PEM file. The server certificate will be placed on each MongoDB virtual machine at `/var/vcap/jobs/mongod_node/config/server.pem`.
  * Enter the Certificate Authority (CA) server certificate. This will be placed in `/var/vcap/jobs/mongod_node/config/cacert.pem`.
  <p class='note'><strong>Note:</strong> These settings only configure the placement of the certificates on the provisioned machines running MongoDB. In order to actually enable SSL communication, you must complete the configuration in the corresponding <strong>Project Security</strong> settings in MongoDB Ops Manager. For more information, see <a href="https://docs.opsmanager.mongodb.com/current/tutorial/enable-ssl-for-a-deployment/">Enabling SSL for a Deplopyment</a>.</p>
	![SSL Config](images/ssl_config.png)

1. (Optional) Configure the **Errands**, **Resource Config**, and **Stemcell** sections.

1. Return to the Ops Manager Installation Dashboard and click **Apply Changes** to install the MongoDB Enterprise Service for PCF tile and wait for the installation to complete.

1. Log in to MongoDB Ops Manager and add the PCF Ops Manager IP address to the API whitelist. For more information, see [MongoDB Ops Manager Documentation](https://docs.opsmanager.mongodb.com/current/tutorial/configure-public-api-access/).

1. After the installation finishes, see [Creating and Binding MongoDB Service Instances](binding.html) for how to create and bind MongoDB service instances.

## <a id="troubleshoot"></a> Troubleshooting

This section describes how to troubleshoot known issues when installing the MongoDB Enterprise Service for PCF tile.

### Symptom

MongoDB Ops Manager is not found.

### Explanation

The problem may be produced by one of the following causes:

* MongoDB Ops Manager is not reachable.
* MongoDB Ops Manager API is not enabled.
* MongoDB Ops Manager API key is invalid.

### Solution

1. Ensure that MongoDB Ops Manager is running and reachable across the network.

1. Navigate to **Group Settings** in MongoDB Ops Manager and ensure that you have **Public API** enabled.

1. Ensure that the MongoDB Ops Manager API key you provided when configuring the tile is valid. If not, navigate to **Group Settings** in MongoDB Ops Manager and generate a new one.

### Symptom

Undetermined error.

### Explanation

Various errors can occur due to misconfiguration, networking issue, or other problems.

### Solution

1. Check logs for errors. From the PCF side, you can find logs in the `/var/vcar/sys/log` directory.

1. Find the task ID of your provisioning job from the output of the `bosh tasks` command. You can then view logs from the task with the command `bosh task <TASK_ID>`.

1. On your Ops Manager machine, depending on your installation method, logs can be found for archive installs and package manager installs:
    * For archive installs: `<ARCHIVE_DIR>/logs`
    * For package manager installs: `/var/log/mongodb-mms`
